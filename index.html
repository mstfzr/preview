export default {
  async fetch(request) {
    const userAgent = request.headers.get("user-agent") || "";

    // Deteksi bot Threads/Meta
    const isBot = /facebookexternalhit|Twitterbot|ThreadsBot|WhatsApp/i.test(userAgent);

    const htmlPreview = `<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>I just wanna be good for you</title>
  <meta property="og:title" content="I just wanna be good for you" />
  <meta property="og:description" content="Let's talk in private ðŸ’•" />
  <meta property="og:image" content="https://i.postimg.cc/hG3sZ74H/Snapinsta-app-340487404-752996419828397-4032469551223478880-n-1080.jpg" />
  <meta property="og:url" content="https://withered-paper-3dfa.keenam0991.workers.dev/" />
</head>
<body>
  <script>
    setTimeout(() => {
      window.location.href = "https://exvlq.yourfandate.net/?utm_source=da57dc555e50572d&ban=inst&j1=1&s1=22010&s2=1127873&s3=ZORO&click_id=Alteam";
    }, 3000); // Redirect setelah 3 detik
  </script>
  <p>Redirecting... please wait</p>
</body>
</html>`;

    // Jika bot, kirim halaman untuk dibaca OG tags
    if (isBot) {
      return new Response(htmlPreview, {
        headers: { 'content-type': 'text/html' },
      });
    }

    // Jika bukan bot (user nyata), redirect langsung
    return Response.redirect("https://exvlq.yourfandate.net/?utm_source=da57dc555e50572d&ban=inst&j1=1&s1=22010&s2=1127873&s3=ZORO&click_id=Alteam", 302);
  }
};
